<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance Pro</title>

<style>
*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    radial-gradient(circle at 20% 30%, #6366f1 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, #8b5cf6 0%, transparent 40%),
    linear-gradient(135deg,#0f172a,#111827);
  color:white;
}

.card{
  width:95%;
  max-width:600px;
  padding:30px;
  border-radius:28px;
  backdrop-filter:blur(40px);
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.2);
  box-shadow:0 40px 100px rgba(0,0,0,0.7);
}

h1{
  margin:0 0 10px 0;
  text-align:center;
}

.subtitle{
  text-align:center;
  opacity:0.7;
  margin-bottom:20px;
}

select,input{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:16px;
  border:none;
  background:rgba(255,255,255,0.1);
  color:white;
  font-size:14px;
  outline:none;
}

button{
  width:100%;
  padding:16px;
  border-radius:18px;
  border:none;
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
  color:white;
  font-weight:600;
  font-size:15px;
  cursor:pointer;
  transition:0.2s ease;
}

button:hover{
  transform:scale(1.03);
}

.result{
  margin-top:20px;
  padding:20px;
  border-radius:20px;
  background:rgba(255,255,255,0.1);
  line-height:1.6;
}

.safe{ border:1px solid rgba(0,255,150,0.6); }
.danger{ border:1px solid rgba(255,60,60,0.7); }

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
</style>
</head>

<body>

<div class="card">

<h1>Hello vro ðŸ‘‹</h1>
<div class="subtitle">Smart Attendance Tracker</div>

<select id="subject">
  <option value="ds">Data Structures</option>
  <option value="python">Python</option>
  <option value="la">Linear Algebra</option>
  <option value="dtw">Design Tools</option>
  <option value="coa">COA</option>
  <option value="iot">IoT</option>
  <option value="comm">Communication</option>
</select>

<input type="date" id="selectedDate">

<div class="grid">
<input type="number" id="L" placeholder="Lectures Attended">
<input type="number" id="P" placeholder="Practicals Attended">
<input type="number" id="T" placeholder="Tutorials Attended">
<input type="number" id="S" placeholder="Skills Attended">
</div>

<button onclick="calculate()">Calculate</button>

<div class="result" id="result"></div>

</div>

<script>

const semesterStart = new Date("2025-12-22");
const semesterEnd = new Date("2026-04-18");

const holidays = [
  "2026-01-12","2026-01-13","2026-01-14",
  "2026-01-15","2026-01-16","2026-01-17",
  "2026-03-19","2026-03-21",
  "2026-03-27","2026-04-14"
];

function isHoliday(date){
  return holidays.includes(date.toISOString().split("T")[0]);
}

function isExamWeek(date){
  let start = new Date("2026-02-16");
  let end = new Date("2026-02-21");
  return date >= start && date <= end;
}

function getPeriods(day){

  switch(day){

    case 1: return [
      {sub:"ds",comp:"S"},
      {sub:"ds",comp:"S"},
      {sub:"python",comp:"L"},
      {sub:"python",comp:"L"},
      {sub:"comm",comp:"P"},
      {sub:"comm",comp:"P"}
    ];

    case 2: return [
      {sub:"ds",comp:"S"},
      {sub:"ds",comp:"S"},
      null,null,
      {sub:"comm",comp:"P"},
      {sub:"comm",comp:"P"}
    ];

    case 3: return [
      {sub:"iot",comp:"L"},
      {sub:"iot",comp:"L"},
      {sub:"ds",comp:"L"},
      {sub:"ds",comp:"L"},
      {sub:"dtw",comp:"P"},
      {sub:"dtw",comp:"P"}
    ];

    case 4: return [
      {sub:"iot",comp:"P"},
      {sub:"iot",comp:"P"},
      {sub:"la",comp:"S"},
      {sub:"la",comp:"S"},
      {sub:"dtw",comp:"P"},
      {sub:"dtw",comp:"P"}
    ];

    case 5: return [
      {sub:"la",comp:"T"},
      {sub:"la",comp:"T"},
      {sub:"ds",comp:"P"},
      {sub:"ds",comp:"P"},
      {sub:"coa",comp:"L"},
      {sub:"coa",comp:"L"}
    ];

    case 6: return [
      {sub:"coa",comp:"L"},
      null,
      {sub:"python",comp:"P"},
      {sub:"python",comp:"P"},
      {sub:"ds",comp:"L"},
      null
    ];

    default: return [];
  }
}

function countClasses(untilDate){

  let counts = {};
  let current = new Date(semesterStart);

  while(current <= untilDate){

    if(current.getDay() !== 0 && !isHoliday(current)){

      let periods = getPeriods(current.getDay());

      if(isExamWeek(current)){
        periods = periods.slice(2);
      }

      periods.forEach(p=>{
        if(!p) return;
        if(!counts[p.sub]) counts[p.sub]={};
        if(!counts[p.sub][p.comp]) counts[p.sub][p.comp]=0;
        counts[p.sub][p.comp]++;
      });
    }

    current.setDate(current.getDate()+1);
  }

  return counts;
}

function calculate(){

  const subject = document.getElementById("subject").value;
  const dateValue = document.getElementById("selectedDate").value;

  if(!dateValue){
    document.getElementById("result").innerHTML="Select a date.";
    return;
  }

  let selectedDate = new Date(dateValue);

  if(selectedDate < semesterStart){
    document.getElementById("result").innerHTML="Semester not started.";
    return;
  }

  if(selectedDate > semesterEnd){
    selectedDate = semesterEnd;
  }

  let completed = countClasses(selectedDate);
  let totals = countClasses(semesterEnd);

  let compCompleted = completed[subject] || {};
  let compTotal = totals[subject] || {};

  let output="";
  let box=document.getElementById("result");

  let overallSafe=true;

  for(let comp in compTotal){

    let attended=parseInt(document.getElementById(comp).value)||0;
    let completedCount=compCompleted[comp]||0;
    let totalCount=compTotal[comp];

    let percent = completedCount ? (attended/completedCount)*100 : 0;
    let required=0.85*totalCount;

    let safeFuture=Math.floor((attended-required)+(totalCount-completedCount));

    if(percent<85) overallSafe=false;

    output+=`<b>${comp}</b><br>
    Completed: ${completedCount}<br>
    Total: ${totalCount}<br>
    Current: ${percent.toFixed(2)}%<br>
    Safe Future Bunks: ${safeFuture>0?safeFuture:0}<br><br>`;
  }

  box.className="result "+(overallSafe?"safe":"danger");
  box.innerHTML=output;
}

</script>

</body>
</html>
