<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attendance Glass</title>

<style>
* {
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at 20% 30%, #6366f1 0%, transparent 40%),
              radial-gradient(circle at 80% 70%, #8b5cf6 0%, transparent 40%),
              linear-gradient(135deg, #0f172a, #111827);
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  overflow: hidden;
}

/* Glass Card */
.card {
  width: 95%;
  max-width: 520px;
  padding: 30px;
  border-radius: 30px;
  backdrop-filter: blur(40px);
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.2);
  box-shadow: 0 40px 120px rgba(0,0,0,0.7);
  animation: fadeIn 0.6s ease;
}

@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform: translateY(0);}
}

h1 {
  text-align: center;
  margin-bottom: 5px;
}

.subtitle {
  text-align: center;
  font-size: 14px;
  opacity: 0.7;
  margin-bottom: 20px;
}

select, input {
  width: 100%;
  padding: 13px;
  margin-bottom: 12px;
  border-radius: 16px;
  border: none;
  background: rgba(255,255,255,0.1);
  color: white;
  outline: none;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 18px;
  border: none;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s ease;
}

button:hover {
  transform: scale(1.03);
}

.result {
  margin-top: 20px;
  padding: 18px;
  border-radius: 20px;
  background: rgba(255,255,255,0.1);
  font-size: 14px;
  line-height: 1.6;
}

.safe { border: 1px solid rgba(0,255,150,0.6); }
.warn { border: 1px solid rgba(255,180,0,0.6); }
.danger { border: 1px solid rgba(255,60,60,0.7); }

</style>
</head>

<body>

<div class="card">
<h1>Hello vro ðŸ‘‹</h1>
<div class="subtitle">Choose your subject</div>

<select id="subject" onchange="loadSubject()">
  <option value="">-- Select Subject --</option>
  <option value="ds">Data Structures</option>
  <option value="python">Python</option>
  <option value="la">Linear Algebra</option>
  <option value="dtw">Design Tools</option>
  <option value="coa">COA</option>
  <option value="iot">IoT & Sensors</option>
  <option value="comm">Communication</option>
</select>

<div id="inputs"></div>

<button onclick="calculate()">Calculate</button>

<div class="result" id="result"></div>
</div>

<script>

const data = {
  ds: { L:46, P:30, S:58 },
  python: { L:32, P:32 },
  la: { T:28, S:30 },
  dtw: { P:60 },
  coa: { L:46 },
  iot: { L:28, P:28 },
  comm: { P:62 }
};

const weights = { L:1, P:0.5, T:0.25, S:0.25 };

function loadSubject() {
  let subject = document.getElementById("subject").value;
  let container = document.getElementById("inputs");
  container.innerHTML = "";

  if (!subject) return;

  let components = data[subject];

  for (let comp in components) {
    container.innerHTML += 
      `<input type="number" id="${comp}" placeholder="${comp} Attendance %">`;
  }
}

function calculate() {

  let subject = document.getElementById("subject").value;
  if (!subject) return;

  let components = data[subject];

  let weightedTotal = 0;
  let weightedAttended = 0;

  for (let comp in components) {

    let total = components[comp];
    let percentInput = document.getElementById(comp).value;

    if (percentInput === "") continue;  // ignore empty fields

    let percent = parseFloat(percentInput);
    let weight = weights[comp];

    let attended = (percent/100) * total;

    weightedTotal += total * weight;
    weightedAttended += attended * weight;
  }

  if (weightedTotal === 0) return;

  let combined = (weightedAttended / weightedTotal) * 100;
  let required = 0.85 * weightedTotal;
  let margin = weightedAttended - required;

  let safeLecture = Math.floor(margin / 1);
  let safePractical = Math.floor(margin / 0.5);
  let safeTutorial = Math.floor(margin / 0.25);

  let box = document.getElementById("result");

  let statusClass = "safe";
  if (combined < 85) statusClass = "danger";
  else if (combined < 88) statusClass = "warn";

  box.className = "result " + statusClass;

  box.innerHTML = `
    Combined Attendance: <b>${combined.toFixed(2)}%</b><br><br>
    Margin Units: ${margin.toFixed(2)}<br><br>
    You can still bunk approximately:<br>
    Lectures: ${safeLecture}<br>
    Practicals: ${safePractical}<br>
    Tutorials/Skills: ${safeTutorial}
  `;
}

</script>

</body>
</html>
